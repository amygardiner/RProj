---
title: "Assignment 3"
author: "Amy Gardiner"
date: "12/10/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Tidy Data and Iteration 
```{r, echo=FALSE}
library(tidyverse)

impute_by_median<-function(x){
  
  mu<-median(x,na.rm=1) # first compute the median of x
  
  impute_f<-function(z){ # coordinate-wise imputation
    if(is.na(z)){
      return(mu) # if z is na replace with median
    }else{
      return(z) # otherwise leave in lace
    }
  }
  return(map_dbl(x,impute_f)) # apply the map function to impute across vector
}

v<-c(1,2,NA,4)
impute_by_median(v)

x<-c(seq(0,10,0.1))
y<-c(seq(1,51,0.5))
df_xy<-data.frame(x,y)
df_xy%>%head(5)

df_xy%>%
  mutate(z=map2_dbl(x,y,~.x+.y)) %>%
  head(5)
  
sometimes_missing<-function(index,value){
  if(index%%5==0){
    return(NA)
  }else{
    return(value)
  }
}

sometimes_missing(14,25)
sometimes_missing(15,25)

df_xy_missing<-data.frame(x,y)
df_xy_missing%>%
  select(x) %>%
  mutate(z=map2_dbl(row_number(y),y,sometimes_missing)) %>%
  rename(y=z) %>%
  head(10)
```

